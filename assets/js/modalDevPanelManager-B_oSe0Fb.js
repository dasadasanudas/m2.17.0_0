import{V as e,r as t}from"./icon-alert-Cei3Tz55.js";import{g as i,d as n}from"./onboardingStepCollection-hWSw7aqV.js";import"./localStorage-BThj8CCp.js";import"./preload-helper-xKIU3iAw.js";import"./string-CbqVM-Zr.js";import"./VueBase-DhIJfHAY.js";import"./index-xreAsusa.js";import"./migrateLegacyUserMessageHandler-aPkGeFs_.js";import"./main-Bw6ngw5x.js";import"./index-CJJH83pl.js";import"./portal-vue.esm-D8ZiK_2v.js";import"./itemModelMixin-C-MQn-VF.js";import"./reactiveCustomization-D0v-tpvX.js";import"./namesMixin-1rfnIeIW.js";import"./itemDataServiceMixins-CdQVI9mg.js";import"./icon-asana-Csd73e1k.js";import"./focusModeHelpers-CJvjcTIo.js";import"./PomodoroTimers-BWkB-14p.js";import"./SubscriptionSummary-Q5jMw6Hb.js";import"./constants-CALDQiUE.js";import"./authService-piMSfLVB.js";import"./loginHelpers-CQ1ZDpQp.js";import"./icon-confetti-Dz2LojDe.js";import"./siteBlockerGroups-BWyYGTCQ.js";import"./constants-DNx-NqfY.js";import"./compareObjects-BF7sSNEf.js";const s=new(e.extend({name:"ModalDevPanelManager",data:()=>({experimentMap:i(),definitions:n,pinnedStep:null}),methods:{setStepActive(e,t){const i=()=>m.trigger("modal:show",e,{subStepIndex:t,force:!0});m.modals?i():m.once("modalContainer:created:checkForced",i)},setPinnedStepActiveOnDashLoad({stepId:e,subStepIndex:i,experimentId:n,variantId:s}={}){let p;if(n){const t=this.experimentMap[n],i=t&&t.variants[s];p=i&&i.steps[e]}else p=this.definitions[e];p&&(this.toggleStepPinned(p,{stepId:e,subStepIndex:i,experimentId:n,variantId:s}),t.appsReady?this.setStepActive(p,i):m.once("appsReady",(()=>{this.setStepActive(p,i)})))},toggleStepPinned(e,{stepId:t,subStepIndex:i,experimentId:n,variantId:s}={}){const p=localStorage.getObject("devPanel:pinnedStep");p?this.objectsMatch(p,{stepId:t,subStepIndex:i,experimentId:n,variantId:s})?(this.$set(e,"pinned",!e.pinned),this.pinnedStep=e.pinned?e:null,this.updateSubStepIndex(e,e.pinned?i:void 0),null===this.pinnedStep&&m.trigger("modal:close")):this.objectsMatch((({stepId:e,experimentId:t,variantId:i})=>({stepId:e,experimentId:t,variantId:i}))(p),{stepId:t,experimentId:n,variantId:s})?this.updateSubStepIndex(e,i):(this.pinnedStep&&(this.$set(this.pinnedStep,"pinned",!1),this.updateSubStepIndex(this.pinnedStep,void 0)),this.$set(e,"pinned",!0),this.updateSubStepIndex(e,i),this.pinnedStep=e):(this.$set(e,"pinned",!0),this.pinnedStep=e,this.updateSubStepIndex(e,i)),e.pinned?localStorage.setObject("devPanel:pinnedStep",{stepId:t,subStepIndex:i,experimentId:n,variantId:s}):localStorage.removeItem("devPanel:pinnedStep")},updateSubStepIndex(e,t){void 0===t?this.$delete(e,"pinnedSubStepIndex"):this.$set(e,"pinnedSubStepIndex",t)},objectsMatch:(e,t)=>new Array(...new Set([...Object.keys(e),...Object.keys(t)])).every((i=>e[i]===t[i]))}}));export{s as default};