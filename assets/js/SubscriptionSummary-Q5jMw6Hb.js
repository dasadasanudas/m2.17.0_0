import{M as a,d as e,u as r,a as t,b as i,c as s,e as n}from"./icon-alert-Cei3Tz55.js";import{p as l}from"./index-xreAsusa.js";import"./localStorage-BThj8CCp.js";import"./preload-helper-xKIU3iAw.js";import"./string-CbqVM-Zr.js";import"./migrateLegacyUserMessageHandler-aPkGeFs_.js";import"./main-Bw6ngw5x.js";var d=(a=>(a.Plus="subscribed",a.TrialingCardless="trialingCardless",a.TrialingCard="trialingCard",a.ExpiredTrial="expiredTrial",a.ExpiredPlus="expiredPlus",a.Free="free",a))(d||{});const o=l((({loadedRef:a,loadingRef:l,refresh:d})=>{const o=e("userSubscriptionSummary",{state:()=>({active:!1,error:null,firstSubscriptionStart:null,hasPaymentMethod:!1,intent:null,pastDue:!1,subscriptionEnd:null,trialEnd:null,trialing:!1}),getters:{loaded:()=>a.value,loading:()=>l.value,status:a=>a.trialing&&a.hasPaymentMethod?"trialingCard":a.trialing&&!a.hasPaymentMethod?"trialingCardless":a.active?"subscribed":a.subscriptionEnd?"expiredPlus":a.trialEnd?"expiredTrial":"free",trialRemainingDays:a=>i.dateDiffIntegerDays(Date.now(),a.trialEnd??Date.now()),subscriptionDaysElapsed:a=>a.firstSubscriptionStart?i.dateDiffIntegerDays(new Date(a.firstSubscriptionStart),new Date)+1:0},actions:{refresh(e=!1){if(!s()&&!n())return d(e);a.value=!0}}});return(async()=>{const a=o();await r((()=>a.loaded)).toBe(!0),a.active&&!m.conditionalFeatures.featureEnabled("plus")&&t.allowRequests()})(),o}),{path:"user/subscription_summary",mode:a.TimestampStrict});export{d as SubscriptionStatus,o as default};