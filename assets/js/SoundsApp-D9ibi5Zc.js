import{q as t,n as e,a5 as s,B as i}from"./icon-alert-Cei3Tz55.js";import{u as o,a as r,S as a}from"./state-Te6231FT.js";import{A as n}from"./AppPopup-BwTiSELh.js";import{A as p}from"./AppViewSwitchDynamic-DCOLomdp.js";import{A as c}from"./AppView-CLCF208Q.js";import{a as l}from"./AppHeader-qzvUiXuB.js";import{B as u}from"./BaseIcon-DKpoUDYB.js";import{B as m}from"./BaseItemList-DZ-fAhZy.js";import{u as d,L as y,a as f,S as v,b as S,c as h,d as j,e as b,f as g,P as I,g as k,h as w}from"./soundsPlayer-CXHWl8nc.js";import{S as _,a as x}from"./SoundsAudioCover-Bf4yN6z4.js";import{B as A}from"./constants-BpVlFj04.js";import{A as C}from"./AppLoading-B4vn2HVx.js";import B from"./OverflowCarousel-_rYwBXQm.js";import{A as T}from"./AppHeaderControl-DmqWUMjw.js";import{S as L}from"./Slider-om_kKXEn.js";import{D as P}from"./constants-CALDQiUE.js";import{T as O,A as V}from"./AppActionBanner-CioGZkgY.js";import{I as D}from"./IframeHost-DGD1fImW.js";import{B as F}from"./BaseForm-BUqGxpHs.js";import{F as H}from"./FormEditableSpan-AMyq4j5l.js";import"./localStorage-BThj8CCp.js";import"./preload-helper-xKIU3iAw.js";import"./string-CbqVM-Zr.js";import"./ViewState-Wts6aMTb.js";import"./main-Bw6ngw5x.js";import"./index-xreAsusa.js";import"./migrateLegacyUserMessageHandler-aPkGeFs_.js";import"./globalKeyEventManager-2_REwTdI.js";import"./SmoothReflow-DOlTFzdt.js";import"./allComponentsMounted-C3UsG_cA.js";import"./icon-hide-NFfBhfBx.js";import"./arrow-Be8MuPJi.js";import"./icon-weather-reset-CoyptBb8.js";import"./icon-settings-Bycjf8-G.js";import"./icon-back-arrow-CiRQJ6G-.js";import"./icon-back-D_TFrgyJ.js";import"./icon-trash-BQ1O-AfY.js";import"./icon-close-BUGl_M7j.js";import"./icon-cog-BFr_Pva7.js";import"./icon-skip-BOkC5L0N.js";import"./icon-down-BiHbKN-t.js";import"./icon-edit-CixeXNYx.js";import"./icon-ellipsis-D3jS4u3x.js";import"./icon-error-state-BKQhfBCj.js";import"./icon-heart-v5O7C6eS.js";import"./icon-key-BPNRipb3.js";import"./icon-next-B4hjdiAA.js";import"./icon-photo-BrwqV1T0.js";import"./icon-pin-BHeOuzvO.js";import"./icon-plus-D4YOesIc.js";import"./icon-profile-B_XWyuTb.js";import"./icon-x-qUCmf2CW.js";import"./icon-skip-intro-BUi8b3Ak.js";import"./icon-tooltip-CN09iXOB.js";import"./icon-visible-on-CM3kpcFN.js";import"./icon-x-caret-half-CZtcH_PM.js";import"./tasks-completed-Dg2z75km.js";import"./add-COIuonao.js";import"./google-DKPAcOmk.js";import"./arrow-up-1QPpu78M.js";import"./square-check-DwLT60gj.js";import"./clocks-DjzskNOU.js";import"./close-Bj_A2br_.js";import"./search-DCqlmJx6.js";import"./folder-CwWTWsnJ.js";import"./switch-EuBTQVVE.js";import"./focus-mode-09pIyYAW.js";import"./storage-YYEO5TB5.js";import"./icon-confetti-Dz2LojDe.js";import"./sparks-CAw9b6ob.js";import"./secure-B8YP-AML.js";import"./icon-asana-Csd73e1k.js";import"./icon-soundwave-CtfxieWt.js";import"./icon-percent-schedule-CA5EI9b7.js";import"./icon-trello-DeIn-36G.js";import"./icon-clean-rFsPxTtp.js";import"./icon-more-lists-Cl9oRGK2.js";import"./icon-more-fonts-CcfOY0t4.js";import"./icon-focus-stats-keERwXFt.js";import"./icon-top-of-mind-B6EhbCcK.js";import"./icon-flow-5QqmGIWX.js";import"./icon-integrations-D9o58ob4.js";import"./icon-weather-extra-ufLpT_SX.js";import"./icon-spiral-gh4hwZDD.js";import"./icon-time-sensitive-CP2L3maw.js";import"./icon-hourly-CdMmiQZT.js";import"./icon-infinity-D4yMRoAd.js";import"./icon-personalize-photos-D2M4lLlt.js";import"./icon-skip-2bGCAGKt.js";import"./icon-photo-match-C2EChNEK.js";import"./icon-random-375DbcwF.js";import"./icon-timezones-DGZoTtaT.js";import"./icon-simplify-BRUtLJYp.js";import"./icon-sync-DIH26Y9h.js";import"./IframeMessenger-CZMsBVeI.js";import"./focusModeHelpers-CJvjcTIo.js";import"./reactiveCustomization-D0v-tpvX.js";import"./VueBase-DhIJfHAY.js";import"./index-CJJH83pl.js";import"./portal-vue.esm-D8ZiK_2v.js";import"./PomodoroTimers-BWkB-14p.js";import"./focusModeViewState-DzdkaS0D.js";import"./pomodoroCompleted-CChcDNoN.js";import"./loginHelpers-CQ1ZDpQp.js";import"./authService-piMSfLVB.js";import"./customization-C9MvloB8.js";import"./BaseDropdown-BnEBcF3g.js";import"./BaseDropdownContent-CE_Bs11r.js";import"./index-CAmMGhGv.js";import"./FormMessage-CGWi8obs.js";const M=t({name:"SoundsCurrentlyPlaying"});const E=t({name:"SoundsLibraryListItem",components:{SoundsCurrentlyPlaying:e(M,(function(){var t=this;return t._self._c,t._self._setupProxy,t._m(0)}),[function(){var t=this._self._c;return this._self._setupProxy,t("div",{staticClass:"sounds-currently-playing dark"},[t("div",{staticClass:"indicator"}),t("div",{staticClass:"indicator"}),t("div",{staticClass:"indicator"})])}],!1,null,"155905a9").exports,SoundsPlayButton:_,SoundsAudioCover:x},props:{item:{type:Object,required:!0}},setup:()=>({playerStore:d(),viewStateStore:o(),capture:s("capture")}),computed:{active(){var t;return(null==(t=this.playerStore.activeItem)?void 0:t.id)===this.item.id},inactiveOrPaused(){return!this.active||this.playerStore.paused},playButtonClickCallback(){return this.active?t=>{t.stopPropagation(),this.playerStore.toggleActiveItemPaused()}:()=>{}}},methods:{updateViewAndPlayAudio(){var t;this.viewStateStore.activeViewItemId=this.item.id,this.viewStateStore.setActiveView(r.Item),this.playerStore.play(this.item.id),null==(t=this.capture)||t.call(this,"sounds library item click",{id:this.item.id,type:this.item.type,title:this.item.title})}}});const q=e(t({name:"SoundsLibraryList",components:{SoundsLibraryListItem:e(E,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("li",{staticClass:"sounds-library-list-item",class:{active:t.active},on:{click:t.updateViewAndPlayAudio}},[e("div",{staticClass:"cover-player"},[e("sounds-play-button",{attrs:{id:t.item.id,paused:t.inactiveOrPaused,size:t.active?"26px":"40px"},on:{click:t.playButtonClickCallback}}),e("transition",{attrs:{name:"fade-fast"}},[t.active&&!t.playerStore.paused?e("sounds-currently-playing"):t._e()],1),e("sounds-audio-cover",{attrs:{"thumbnail-url":t.item.thumbnailSrc,icon:t.item.icon??"",type:t.item.type}})],1),e("span",{staticClass:"item-title"},[t._v(t._s(t.item.title))])])}),[],!1,null,"305953a9").exports,BaseItemList:m},props:{filter:{type:String,required:!0}},setup:()=>({playerStore:d(),BaseItemListDirection:A}),computed:{allItemOrderedAndFiltered(){return this.playerStore.allItemsOrdered.filter((t=>!this.filter||t.type===this.filter))}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("base-item-list",{staticClass:"sounds-library-list",attrs:{direction:t.BaseItemListDirection.Row,wrap:!0,"wrap-column-count":5,gap:"var(--spacing-5)"}},t._l(t.allItemOrderedAndFiltered,(function(t){return e("sounds-library-list-item",{key:t.id,attrs:{item:t,"data-test":"sounds-list-item"}})})),1)}),[],!1,null,"9bfd449f").exports,z=t({name:"AppFilter",components:{BaseItemList:m,OverflowCarousel:B},props:{value:{type:String,required:!0},options:{type:Array,required:!0}},emits:["input"],setup:()=>({BaseItemListDirection:A})});const K=e(t({name:"SoundsLibrary",components:{AppFilter:e(z,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"app-filter"},[e("overflow-carousel",{attrs:{direction:t.BaseItemListDirection.Row}},[e("base-item-list",{attrs:{direction:t.BaseItemListDirection.Row,gap:"var(--spacing-3)"}},t._l(t.options,(function(s){return e("button",{key:s.value||"default",staticClass:"button button-neutral",class:{selected:s.value===t.value},on:{click:function(e){return t.$emit("input",s.value)}}},[t._v(" "+t._s(s.label)+" ")])})),0)],1)],1)}),[],!1,null,"9bef83cd").exports,AppLoading:C,SoundsLibraryList:q,BaseIcon:u,AppHeader:l,AppView:c},setup:()=>({playerStore:d(),LibraryFilterOptions:y}),data:()=>({filter:y[0].value})}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("app-view",{staticClass:"sounds-library",scopedSlots:t._u([{key:"header",fn:function(){return[e("app-header",{scopedSlots:t._u([{key:"left",fn:function(){return[e("base-icon",{staticClass:"app-header-icon",attrs:{src:"icon/apps/sounds",size:"16px"}}),e("span",{staticClass:"app-header-name"},[t._v("Sounds")])]},proxy:!0}])}),e("app-filter",{attrs:{options:t.LibraryFilterOptions},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(){return[e("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t.playerStore.loadedAllItems?e("sounds-library-list",{attrs:{filter:t.filter}}):e("app-loading",{attrs:{"data-test":"items-loading"}})],1)]},proxy:!0}])})}),[],!1,null,"0bad4115").exports,N=t({name:"SoundsItemSoundscapeTrack",components:{Tooltip:O,Slider:L,BaseIcon:u},props:{soundscapeId:{type:String,required:!0},track:{type:Object,required:!0}},setup:()=>({soundscapesStore:f(),capture:s("capture"),volumeAnalyticsCaptureTimeout:void 0,DropdownAlignment:P}),computed:{trackIcon(){return`icon/sounds/${v[this.track.id].icon}`},title(){return`Turn ${this.track.active?"off":"on"} ${v[this.track.id].title}`}},methods:{updateTrackVolume(t){this.soundscapesStore.updateTrack(this.soundscapeId,this.track.id,{volume:t}),clearTimeout(this.volumeAnalyticsCaptureTimeout),this.volumeAnalyticsCaptureTimeout=setTimeout((()=>{var e;null==(e=this.capture)||e.call(this,"sounds track volume update",{volume:t,id:this.track.id})}),300)},toggleTrackActive(){var t;this.soundscapesStore.updateTrack(this.soundscapeId,this.track.id,{active:!this.track.active}),null==(t=this.capture)||t.call(this,"sounds track active toggle",{id:this.track.id,active:!this.track.active})}}});const R=e(t({name:"SoundsItemSoundscape",components:{SoundsItemSoundscapeTrack:e(N,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("li",{staticClass:"sounds-item-soundscape-track",class:{disabled:!t.track.active}},[e("tooltip",{staticClass:"toggle-container",attrs:{label:t.title}},[e("div",{staticClass:"toggle-content",attrs:{"data-test":"sounds-track-item"},on:{click:t.toggleTrackActive}},[e("base-icon",{attrs:{src:t.trackIcon,size:"var(--spacing-6)"}})],1)]),e("div",{staticClass:"slider-content"},[e("slider",{attrs:{id:t.track.id,value:t.track.volume,min:.05,max:1,interval:.05,"data-test":"sounds-track-volume"},on:{input:t.updateTrackVolume}})],1)],1)}),[],!1,null,"a7243b79").exports,BaseItemList:m},props:{id:{type:String,required:!0}},setup:()=>({soundscapesStore:f()}),computed:{soundscape(){return this.soundscapesStore.getSoundscapeOrDefaultFromId(this.id)??new S({})},tracks(){return this.soundscape.tracks.filter((t=>!t.advanced))}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"sounds-item-soundscape"},[e("base-item-list",{attrs:{wrap:!0,"wrap-column-count":5,gap:"var(--spacing-3)"}},t._l(t.tracks,(function(s){return e("sounds-item-soundscape-track",{key:s.id,attrs:{"soundscape-id":t.soundscape.id,track:s}})})),1)],1)}),[],!1,null,"98a88f97").exports;const $=e(t({name:"SoundsItemYoutube",components:{IframeHost:D,AppLoading:C},setup:()=>({youtubeStore:h(),iframe:i()}),destroyed(){this.youtubeStore.messenger.disconnect()}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"sounds-item-youtube"},[e("app-loading"),e("iframe-host",{attrs:{"starting-height":"352px",messenger:t.youtubeStore.messenger,"loading-spinner":!1,"fallback-timeout-delay":1e6,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","data-test":"sounds-iframe-youtube"}})],1)}),[],!1,null,"c708aaf7").exports,Y=t({name:"SoundsItemSpotify",components:{IframeHost:D,AppLoading:C},setup:()=>({spotifyStore:j(),iframe:i()}),destroyed(){this.spotifyStore.messenger.disconnect()}});const U=t({name:"SoundsItem",components:{AppActionBanner:V,FormEditableSpan:H,BaseForm:F,SoundsItemSoundscape:R,AppHeaderControl:T,BaseIcon:u,SoundsAudioCover:x,AppHeader:l,AppView:c,SoundsItemYoutube:$,SoundsItemSpotify:e(Y,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"sounds-item-spotify"},[e("app-loading"),e("iframe-host",{attrs:{"starting-height":"352px",messenger:t.spotifyStore.messenger,"loading-spinner":!1,"fallback-timeout-delay":1e6,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture; transparency","data-test":"sounds-iframe-spotify"}})],1)}),[],!1,null,"abee0869").exports},setup:()=>({playerStore:d(),viewStateStore:o(),SoundsDataType:a,SPOTIFY_VOLUME_WARNING_TOOLTIP_TEXT:b}),computed:{activeItem(){return this.playerStore.allItems[this.viewStateStore.activeViewItemId]??new S({})},activeItemKey(){return this.activeItem.id+this.playerStore.activeTabId},activeSpotifyBannerKey(){return this.activeSpotifyBannerDismissKey+this.activeSpotifyBannerText},activeSpotifyBannerDismissKey(){return localStorage.getItem(g)&&this.playerStore.globalVolume<I?"":g},activeSpotifyBannerText(){return this.playerStore.globalVolume<I?k:w}},methods:{goToLibrary(){this.viewStateStore.setActiveView(r.Library)}}});const W=e(t({name:"SoundsApp",components:{SoundsItem:e(U,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("app-view",{staticClass:"sounds-item",scopedSlots:t._u([{key:"header",fn:function(){return[e("app-header",{scopedSlots:t._u([{key:"left",fn:function(){return[e("app-header-control",{attrs:{"data-test":"sounds-back-to-list"},on:{click:t.goToLibrary}},[e("base-icon",{staticClass:"icon",attrs:{src:"icon/arrow-left"}})],1),e("sounds-audio-cover",{staticClass:"app-header-icon",attrs:{"thumbnail-url":t.activeItem.thumbnailSrc,icon:t.activeItem.icon??"",type:t.activeItem.type,size:"32px"}}),e("base-form",{staticClass:"item-title-form",attrs:{submit:()=>{},"submit-button":!1,"submit-on-blur":!0}},[e("form-editable-span",{staticClass:"title-input app-header-name",attrs:{placeholder:`Edit ${t.activeItem.type}`,editing:!1,"data-test":"sounds-item-title-input"},model:{value:t.activeItem.title,callback:function(e){t.$set(t.activeItem,"title",e)},expression:"activeItem.title"}})],1)]},proxy:!0}])}),t.activeItem.type===t.SoundsDataType.Spotify?e("app-action-banner",{key:t.activeSpotifyBannerKey,attrs:{"tooltip-text":t.SPOTIFY_VOLUME_WARNING_TOOLTIP_TEXT,text:t.activeSpotifyBannerText,"dismiss-key":t.activeSpotifyBannerDismissKey}}):t._e()]},proxy:!0},{key:"body",fn:function(){return[t.activeItem.type===t.SoundsDataType.Soundscapes?e("sounds-item-soundscape",{attrs:{id:t.activeItem.id}}):t.activeItem.type===t.SoundsDataType.Youtube?e("sounds-item-youtube",{key:t.activeItemKey}):t.activeItem.type===t.SoundsDataType.Spotify?e("sounds-item-spotify",{key:t.activeItemKey}):t._e()]},proxy:!0}])})}),[],!1,null,"a297ecaf").exports,SoundsLibrary:K,AppViewSwitchDynamic:p,AppPopup:n},setup:()=>({viewStateStore:o(),playerStore:d()}),computed:{libraryOpen(){return this.viewStateStore.activeViewId===r.Library},itemOpen(){return this.viewStateStore.activeViewId===r.Item},activeItemId(){var t;return null==(t=this.playerStore.activeItem)?void 0:t.id}},mounted(){this.viewStateStore.popupFirstMounted=!0,this.playerStore.refresh()}}),(function(){var t,e=this,s=e._self._c;return e._self._setupProxy,s("app-popup",{attrs:{width:560,region:"top-left",position:"bottom-right",focused:e.viewStateStore.focused},on:{close:function(t){return e.viewStateStore.togglePopup(!1)}},nativeOn:{click:function(t){return e.viewStateStore.focus()}}},[s("app-view-switch-dynamic",{attrs:{"order-key":null==(t=e.viewStateStore.activeView)?void 0:t.order,duration:e.viewStateStore.popupActive?300:0,"transition-group":!0}},[e.libraryOpen?s("sounds-library",{key:"library"}):e._e(),s("sounds-item",{directives:[{name:"show",rawName:"v-show",value:e.itemOpen,expression:"itemOpen"}],key:"item"})],1)],1)}),[],!1,null,"7a3a7f04").exports;export{W as default};